# Sistema de Gestión de Ventas Chilepal Ltda. #
Sistema de apoyo a la gestión de ventas de la empresa Chilepal Ltda., dedicada principalmente a la comercialización de palta Hass en distintos calibres (extra, primera, segunda, tercera y descarte) y otros cítricos de temporada. El sistema implementa el flujo de venta descrito para la sucursal de Quillota: desde el registro del cliente y el pedido telefónico hasta la generación de la orden de despacho, la entrega al cliente y el registro del pago.

Está desarrollado en Java SE con interfaz gráfica Swing, utilizando serialización de objetos para persistir la información y una arquitectura Modelo–Vista–Controlador (MVC).

## Características ##
### Gestión de Clientes ###
- Registro de clientes con RUT, nombre, teléfono y dirección
- Visualización de todos los clientes registrados

### Gestión de Productos ###
- Registro de productos (principalmente variedades de palta y frutas asociadas)
- Definición de precio neto y stock disponible
- Visualización de inventario y stock actual

### Gestión de Pedidos ###
- Registro de pedidos telefónicos según el proceso descrito para Chilepal:
  - Selección de cliente
  - Selección de producto
  - Cantidad solicitada
- Cálculo automático del total del pedido según precio neto y cantidad
- Control de estado del pedido (ej.: REGISTRADO, DESPACHADO, ENTREGADO, PAGADO)

### Gestión de Órdenes de Despacho ###
- Generación de una orden de despacho asociada a un pedido confirmado
- Registro y actualización del estado de la orden (ej.: generada, entregada)
- Soporte para el flujo “vendedor → encargado de frigorífico → repartidor” definido para la empresa

### Gestión de Pagos ###
- Registro del pago asociado a un pedido una vez entregado el producto
- Monto pagado y estado de pago
- Relación directa entre pedido, entrega y pago

### Gestión de Repartidores ###
- Registro de repartidores
- Asociación entre orden de despacho y repartidor que realiza la entrega

### Persistencia de Datos ###
- Serialización de todos los objetos de negocio (clientes, productos, pedidos, órdenes, pagos, repartidores) en un archivo binario
- Carga de datos al iniciar la aplicación
- Guardado automático al cerrar o luego de operaciones relevantes (según implementación en el controlador)

## Tecnologías Utilizadas ##
- Lenguaje: Java SE
- Interfaz Gráfica: Swing (JFrame, JPanel, JTable, JComboBox, etc)
- Persistencia: Serialización de objetos (archivo binario)
- Arquitectura: MVC (Modelo–Vista–Controlador)

## Diagrama de Clases ##
![UMLChilepal drawio](https://github.com/user-attachments/assets/23dcaccd-4085-476c-8455-d39bb4fe1102)
<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->

## Estructura del Proyecto ##
```plaintext
ChilePal/
├── src/
│   ├── Main.java                     # Punto de entrada de la aplicación
│   ├── controller/
│   │   └── ChilePalController.java   # Lógica de negocio, flujo de venta y persistencia
│   ├── model/
│   │   ├── Cliente.java              # Entidad Cliente (rut, nombre, teléfono, dirección)
│   │   ├── Producto.java             # Entidad Producto (precio neto, stock)
│   │   ├── Pedido.java               # Entidad Pedido (cliente, producto, cantidad, total, estado)
│   │   ├── OrdenDespacho.java        # Entidad Orden de despacho asociada a un pedido
│   │   ├── Pago.java                 # Entidad Pago asociado a un pedido
│   │   ├── Repartidor.java           # Entidad Repartidor (id, nombre)
│   │   └── EstadoPedido.java         # Enumeración de estados posibles del pedido
│   └── view/
│       ├── VistaPrincipal.java       # Ventana principal y menú de navegación
│       ├── PanelClientes.java        # Panel de gestión y registro de clientes
│       ├── PanelProductos.java       # Panel de gestión de productos e inventario
│       └── PanelPedidos.java         # Panel de registro de pedidos, despachos y pagos
└── datos_chilepal.bin                # Archivo de persistencia (generado automáticamente)
```

## Uso del Sistema ##
### Ventana Principal ###

Al ejecutar la aplicación se muestra la VistaPrincipal, que ofrece un menú (por ejemplo, mediante botones) con las siguientes opciones:
- Gestión de Clientes
- Gestión de Productos
- Pedidos / Despacho / Pagos
- Salir y guardar datos

Cada opción abre una nueva ventana con el panel correspondiente


### Gestión de Clientes ###

En PanelClientes se puede:
- Ver la tabla de clientes registrados (RUT, nombre, teléfono, dirección)
- Registrar un nuevo cliente completando el formulario y presionando el botón “Registrar” (o similar)
- Los datos quedan guardados en memoria y son persistidos en el archivo binario a través de ChilePalController


### Gestión de Productos (Inventario) ###

En PanelProductos se puede:
- Ver la tabla de productos con:
  - ID
  - Nombre
  - Precio neto
  - Stock disponible
- Registrar un nuevo producto (por ejemplo: “Palta Hass Extra”, “Palta Hass Segunda”, “Limón”, etc)
- Actualizar el stock mediante el registro de nuevos productos o modificaciones según la lógica del controlador


### Gestión de Pedidos, Despachos y Pagos ###

En PanelPedidos se concentran las operaciones principales del flujo de venta de Chilepal:
1. Registrar Pedido
   - Seleccionar el cliente desde un JComboBox
   - Seleccionar el producto (principalmente palta Hass en sus distintos tamaños)
   - Ingresar la cantidad solicitada
   - El sistema calcula el total según el precio y la cantidad
   - Se registra el pedido y se agrega a la tabla de pedidos (estado inicial REGISTRADO u otro definido por el enum)
2. Generar Orden de Despacho
   - Seleccionar un pedido en la tabla
   - Generar la OrdenDespacho correspondiente (si el pedido está en un estado compatible)
   - La orden queda asociada al pedido y se muestra en la tabla de órdenes de despacho
3. Registrar Entrega
   - Seleccionar una orden de despacho
   - Seleccionar un repartidor (si el panel implementa asociación directa) o ejecutar la acción de “Entregar”
   - El repartidor traslada el producto a la dirección del cliente y se marca la orden como entregada
   - El estado del pedido se actualiza a ENTREGADO
4. Registrar Pago
   - Una vez entregado el pedido, se registra el Pago:
   - Monto cancelado (generalmente el total del pedido)
   - Estado de pago (pagado / no pagado)
   - El pedido pasa al estado PAGADO según el enum

Las tablas de pedidos, órdenes y pagos se actualizan en pantalla cada vez que se realiza una operación

## Modelo de Datos ##
### Cliente ###
- id
- rut
- nombre
- telefono
- direccion

### Producto ###
- id
- nombre
- precioNeto (precio unitario del producto)
- stock (unidades disponibles en bodega)

### Pedido ###
- id
- cliente (referencia a Cliente)
- producto (referencia a Producto)
- cantidad
- total (precioNeto × cantidad)
- estado (EstadoPedido: REGISTRADO, DESPACHADO, ENTREGADO, PAGADO, etc.)

### OrdenDespacho ###
- id
- pedido (referencia al pedido asociado)
- estado (por ejemplo, generada / entregada)

### Pago ###
- id
- pedido (pedido al que corresponde el pago)
- monto
- pagado (booleano que indica si el pago fue realizado)

### Repartidor ###
- id
- nombre

## Persistencia de Datos ##
El sistema utiliza serialización de objetos Java para almacenar la información en un archivo binario (datos_chilepal.bin):

- El controlador ChilePalController mantiene las listas de:
  - Clientes
  - Productos
  - Pedidos
  - Órdenes de despacho
  - Pagos
  - Repartidores
- Al iniciar la aplicación:
  - Se intenta cargar el archivo binario existente
  - Si no existe, se pueden cargar datos iniciales (productos y clientes de ejemplo) desde código
- Al cerrar la aplicación o después de ciertas operaciones (según implementación), se guarda el estado actual en el archivo binario

Esto permite que los registros permanezcan entre ejecuciones del programa

## Compilación y Ejecución ##

### Requisitos ###
- JDK 8 o superior instalado
- Opcional: IDE como IntelliJ IDEA, Eclipse o NetBeans
### Compilación desde línea de comandos ###
Situado en la carpeta raíz del proyecto (ChilePal/):
```plaintext
# Compilar
javac -d out -sourcepath src src/Main.java

# Ejecutar
java -cp out Main
```
- Nota: si Main está declarado dentro de un paquete (por ejemplo package chilepal;), el comando de ejecución debe usar el nombre calificado completo, por ejemplo:
```plaintext
java -cp out chilepal.Main
```
### Compilación desde un IDE ###
1. Importar el proyecto como Proyecto Java apuntando a la carpeta src
2. Verificar que la versión del JDK sea compatible (8 o superior)
3. Establecer Main como clase de ejecución
4. Ejecutar el proyecto (Run)

## Notas Finales ##
- El diseño sigue la arquitectura MVC:
  - model: entidades de dominio y lógica básica
  - controller: orquestación del flujo de ventas, despachos y pagos, además de la persistencia
  - view: interfaz Swing que interactúa con el usuario.
- El flujo de negocio se basa en el proceso real de Chilepal:
  - pedido telefónico → verificación de stock y factibilidad → preparación en frigorífico → despacho → entrega → pago y emisión de comprobante
